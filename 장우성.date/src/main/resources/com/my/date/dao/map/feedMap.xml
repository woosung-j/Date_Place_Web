<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
	'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>
<mapper namespace='com.my.date.dao.map.FeedMap'>
	<select id='selectFeeds' resultMap='feedDtoMap'>
		select f.feed_id, f.user_id, f.title, f.content, f.created_at, u.nickname, h.tag, h.feed_id
		from feeds f, users u, hashtags h
		where f.user_id = u.user_id and f.feed_id = h.feed_id
		order by created_at
	</select>
	
	<resultMap id='feedDtoMap' type='feedDto'>
		<id column='feed_id' property='feedId'/>
		<result column='user_id' property='userId'/>
		<result column='title' property='title'/>
		<result column='content' property='content'/>
		<result column='created_at' property='createdAt'/>
		<result column='nickname' property='nickname'/>
		<collection property='hashtag' resultMap='hashtagMap'/>
	</resultMap>
	
	<resultMap id='hashtagMap' type='hashtag'>
		<result column='feed_id' property='feedId'/>
		<result column='tag' property='tag'/>
	</resultMap>
</mapper>