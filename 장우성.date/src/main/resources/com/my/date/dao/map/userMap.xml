<?xml version='1.0' encoding='utf-8' ?>
<!DOCTYPE mapper PUBLIC '-//mybatis.org//DTD Mapper 3.0//EN'
	'http://mybatis.org/dtd/mybatis-3-mapper.dtd'>
<mapper namespace='com.my.date.dao.map.UserMap'>
	<select id='selectUsers' resultType='user'>
		select user_id, id, email, password, user_name, phone_number,
				nickname, birthday, created_at, updated_at
		from users
		where order by user_id
	</select>
	
	<select id='selectUser' resultType='user'>
		select user_id, id, password, nickname, email
		from users
		where id = #{id}
	</select>

	<insert id="insertUser">
		insert into users values(users_id_seq.nextval, #{id}, #{email}, #{password}, #{userName}, #{phoneNumber}, #{nickname}, #{birthday}, sysdate, sysdate)
	</insert>	
	
	<update id='updateUser'>
		update users
		set password = #{password,jdbcType=VARCHAR}, nickname = #{nickname,jdbcType=VARCHAR}, phone_number = #{phoneNumber,jdbcType=VARCHAR}, birthday = #{birthday,jdbcType=VARCHAR}
		where user_id = #{userId,jdbcType=NUMERIC}
	</update>
	
	<select id='selectId' resultType='user'>
		select id
		from users
		where user_name = #{userName} and phone_number = #{phoneNumber}
	</select>
	
	<select id='selectPassword' resultType='user'>
		select password
		from users
		where email = #{email}
	</select>
	
	<insert id='deleteUser'>
		insert into delete_users values(#{userId})	
	</insert>
</mapper>